import{S as l,i as t,s as e,l as s,f as a,x as r,e as n,c,b as o,a1 as i,a2 as h,a3 as u,W as d,O as f,d as p,r as m,u as $,w as g,a4 as v,a5 as x,a6 as w,k as I,a as E,n as U,D as y,E as D,t as V,g as b,h as j,P as R,a7 as k,R as C,T as G,U as L,j as M,m as A,o as B,v as N,Y as O}from"./vendor-de530dcf.js";function P(l){let t,e,s,r,m;return{c(){t=n("img"),this.h()},l(l){t=c(l,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){o(t,"class","object-none object-center h-full"),i(t.src,e=l[1])||o(t,"src",e),o(t,"alt","Esikatselukuva")},m(l,e){a(l,t,e),m=!0},p(l,s){(!m||2&s&&!i(t.src,e=l[1]))&&o(t,"src",e)},i(l){m||(h((()=>{r&&r.end(1),s=u(t,d,{duration:300}),s.start()})),m=!0)},o(l){s&&s.invalidate(),r=f(t,d,{duration:100}),m=!1},d(l){l&&p(t),l&&r&&r.end()}}}function S(l){let t,e,n=l[1]&&P(l);return{c(){n&&n.c(),t=s()},l(l){n&&n.l(l),t=s()},m(l,s){n&&n.m(l,s),a(l,t,s),e=!0},p(l,e){l[1]?n?(n.p(l,e),2&e&&r(n,1)):(n=P(l),n.c(),r(n,1),n.m(t.parentNode,t)):n&&(m(),$(n,1,1,(()=>{n=null})),g())},i(l){e||(r(n),e=!0)},o(l){$(n),e=!1},d(l){n&&n.d(l),l&&p(t)}}}function T(l){let t,e,s,r;return{c(){t=n("img"),this.h()},l(l){t=c(l,"IMG",{class:!0,style:!0}),this.h()},h(){o(t,"class","absolute top-0 hidden opacity-0"),v(t,"width","0px"),v(t,"height","0px")},m(n,c){a(n,t,c),s||(r=x(e=l[4].call(null,t,{src:l[2]})),s=!0)},p(l,t){e&&w(e.update)&&4&t&&e.update.call(null,{src:l[2]})},d(l){l&&p(t),s=!1,r()}}}function W(l){let t,e;return{c(){t=n("div"),e=V(" "),this.h()},l(l){t=c(l,"DIV",{class:!0});var s=E(t);e=b(s," "),s.forEach(p),this.h()},h(){o(t,"class","self-end")},m(l,s){a(l,t,s),y(t,e)},p:D,d(l){l&&p(t)}}}function Y(l){let t,e;return{c(){t=n("div"),e=V(l[0]),this.h()},l(s){t=c(s,"DIV",{class:!0});var a=E(t);e=b(a,l[0]),a.forEach(p),this.h()},h(){o(t,"class","self-end")},m(l,s){a(l,t,s),y(t,e)},p(l,t){1&t&&j(e,l[0])},d(l){l&&p(t)}}}function q(l){let t,s,i,h,u,d,f,v,x=l[3],w=S(l),V=l[2]&&T(l);function b(l,t){return l[1]&&l[0]?Y:W}let j=b(l),R=j(l);return{c(){t=n("div"),s=n("div"),i=n("div"),w.c(),h=I(),V&&V.c(),u=I(),d=n("div"),f=n("div"),R.c(),this.h()},l(l){t=c(l,"DIV",{class:!0});var e=E(t);s=c(e,"DIV",{class:!0});var a=E(s);i=c(a,"DIV",{class:!0});var r=E(i);w.l(r),h=U(r),V&&V.l(r),r.forEach(p),a.forEach(p),u=U(e),d=c(e,"DIV",{class:!0});var n=E(d);f=c(n,"DIV",{class:!0});var o=E(f);R.l(o),o.forEach(p),n.forEach(p),e.forEach(p),this.h()},h(){o(i,"class","overflow-hidden h-full"),o(s,"class","rounded-sm aspect-w-5 aspect-h-4 h-full"),o(f,"class","text-center m-auto line-clamp-2 text-gray-200 text-center text-xs overflow-ellipsis group-hover:text-white"),o(d,"class","py-2 px-3 h-11 flex align-center justify-center"),o(t,"class","bg-gray-800")},m(l,e){a(l,t,e),y(t,s),y(s,i),w.m(i,null),y(i,h),V&&V.m(i,null),y(t,u),y(t,d),y(d,f),R.m(f,null),v=!0},p(l,[t]){8&t&&e(x,x=l[3])?(m(),$(w,1,1,D),g(),w=S(l),w.c(),r(w),w.m(i,h)):w.p(l,t),l[2]?V?V.p(l,t):(V=T(l),V.c(),V.m(i,null)):V&&(V.d(1),V=null),j===(j=b(l))&&R?R.p(l,t):(R.d(1),R=j(l),R&&(R.c(),R.m(f,null)))},i(l){v||(r(w),v=!0)},o(l){$(w),v=!1},d(l){l&&p(t),w.d(l),V&&V.d(),R.d()}}}function z(l,t,e){let{imageUrl:s=""}=t,{title:a}=t;const r=l=>`https://api.finna.fi${l}&w=300`;let n,c,o=!1;return l.$$set=l=>{"imageUrl"in l&&e(5,s=l.imageUrl),"title"in l&&e(0,a=l.title)},l.$$.update=()=>{32&l.$$.dirty&&e(2,c=s)},[a,n,c,o,(l,t)=>{const s=new Image;return s.onload=()=>{e(1,n=r(t.src)),e(2,c=null),e(3,o=!o)},e(1,n=null),s.src=r(t.src),{destroy(){}}},s]}class F extends l{constructor(l){super(),t(this,l,z,q,e,{imageUrl:5,title:0})}}function H(l){let t,e;const s=l[2].default,i=R(s,l,l[1],null);return{c(){t=n("li"),i&&i.c(),this.h()},l(l){t=c(l,"LI",{class:!0});var e=E(t);i&&i.l(e),e.forEach(p),this.h()},h(){o(t,"class","px-1 mt-2 w-1/2 sm:w-1/3 md:w-1/4 h-full flex flex-col group"),k(t,"cursor-pointer",!l[0])},m(l,s){a(l,t,s),i&&i.m(t,null),e=!0},p(l,[a]){i&&i.p&&(!e||2&a)&&C(i,s,l,l[1],e?L(s,l[1],a,null):G(l[1]),null),1&a&&k(t,"cursor-pointer",!l[0])},i(l){e||(r(i,l),e=!0)},o(l){$(i,l),e=!1},d(l){l&&p(t),i&&i.d(l)}}}function J(l,t,e){let{$$slots:s={},$$scope:a}=t,{placeholder:r=!1}=t;return l.$$set=l=>{"placeholder"in l&&e(0,r=l.placeholder),"$$scope"in l&&e(1,a=l.$$scope)},[r,a,s]}class K extends l{constructor(l){super(),t(this,l,J,H,e,{placeholder:0})}}function Q(l,t,e){const s=l.slice();return s[1]=t[e],s}function X(l){var t;let e,s,i,h,u;return s=new F({props:{imageUrl:(null==(t=l[1])?void 0:t.images)&&l[1].images[0]||void 0,title:l[1].title}}),{c(){e=n("a"),M(s.$$.fragment),h=I(),this.h()},l(l){e=c(l,"A",{class:!0,href:!0});var t=E(e);A(s.$$.fragment,t),t.forEach(p),h=U(l),this.h()},h(){o(e,"class","flex flex-col"),o(e,"href",i=`/view?id=${encodeURIComponent(l[1].id)}`)},m(l,t){a(l,e,t),B(s,e,null),a(l,h,t),u=!0},p(l,t){var a;const r={};1&t&&(r.imageUrl=(null==(a=l[1])?void 0:a.images)&&l[1].images[0]||void 0),1&t&&(r.title=l[1].title),s.$set(r),(!u||1&t&&i!==(i=`/view?id=${encodeURIComponent(l[1].id)}`))&&o(e,"href",i)},i(l){u||(r(s.$$.fragment,l),u=!0)},o(l){$(s.$$.fragment,l),u=!1},d(l){l&&p(e),N(s),l&&p(h)}}}function Z(l){let t,e;return t=new K({props:{$$slots:{default:[X]},$$scope:{ctx:l}}}),{c(){M(t.$$.fragment)},l(l){A(t.$$.fragment,l)},m(l,s){B(t,l,s),e=!0},p(l,e){const s={};17&e&&(s.$$scope={dirty:e,ctx:l}),t.$set(s)},i(l){e||(r(t.$$.fragment,l),e=!0)},o(l){$(t.$$.fragment,l),e=!1},d(l){N(t,l)}}}function _(l){let t,e,s,i=l[0],h=[];for(let a=0;a<i.length;a+=1)h[a]=Z(Q(l,i,a));const u=l=>$(h[l],1,1,(()=>{h[l]=null}));return{c(){t=n("div"),e=n("ul");for(let l=0;l<h.length;l+=1)h[l].c();this.h()},l(l){t=c(l,"DIV",{});var s=E(t);e=c(s,"UL",{class:!0});var a=E(e);for(let t=0;t<h.length;t+=1)h[t].l(a);a.forEach(p),s.forEach(p),this.h()},h(){o(e,"class","flex flex-row flex-wrap overflow-hidden.")},m(l,r){a(l,t,r),y(t,e);for(let t=0;t<h.length;t+=1)h[t].m(e,null);s=!0},p(l,[t]){if(1&t){let s;for(i=l[0],s=0;s<i.length;s+=1){const a=Q(l,i,s);h[s]?(h[s].p(a,t),r(h[s],1)):(h[s]=Z(a),h[s].c(),r(h[s],1),h[s].m(e,null))}for(m(),s=i.length;s<h.length;s+=1)u(s);g()}},i(l){if(!s){for(let l=0;l<i.length;l+=1)r(h[l]);s=!0}},o(l){h=h.filter(Boolean);for(let t=0;t<h.length;t+=1)$(h[t]);s=!1},d(l){l&&p(t),O(h,l)}}}function ll(l,t,e){let{records:s=[]}=t;return l.$$set=l=>{"records"in l&&e(0,s=l.records)},[s]}class tl extends l{constructor(l){super(),t(this,l,ll,_,e,{records:0})}}export{tl as R};
