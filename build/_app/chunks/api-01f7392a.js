var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r;"undefined"!=typeof require&&require;const c="https://api.finna.fi/api/v1",s=20,f=(e,t)=>`filter[]=${e}:${encodeURIComponent(t)}`,_=e=>{e=e||[1900,"*"];const t=["free_online_boolean:1","datasource_str_mv:kavi","~format_ext_str_mv:1/Video/Video/","~format_ext_str_mv:1/Video/Short/","-id:kavi.elonet_elokuva_1611548","-genre_facet:katsaus"];return t.push(`search_daterange_mv:"[${e[0]} TO ${e[1]}]"`),t.map((e=>`filter[]=${encodeURIComponent(e)}`)).join("&")},p=()=>{const e=[["genre_facet","mainos"],["genre_facet","animaatio"],["genre_facet","tv-tuotanto"],["genre_facet","opetuselokuva"],["genre_facet","henkilödokumentti"],["genre_facet","ammatinkuvaus"],["genre_facet","draamadokumentti"],["genre_facet","teollisuusdokumentti"],["topic_facet","henkilöautot"],["topic_facet","tehtaat"],["topic_facet","matkailu"],["topic_facet","pankit"],["topic_facet","maisema"],["topic_facet","muoti"],["topic_facet","kahvi"],["topic_facet","kaupungit"],["topic_facet","virvoitusjuomat"],["topic_facet","hygienia"],["topic_facet","elintarvikkeet"],["topic_facet","ruoanvalmistus"],["topic_facet","maatalous"],["topic_facet","myymälät"],["topic_facet","rakennukset"],["search_daterange_mv","[1950 TO 1959]"],["search_daterange_mv","[1960 TO 1969]"],["search_daterange_mv","[1970 TO 1979]"],["search_daterange_mv","[1980 TO 2000]"]],t=e[Math.floor(Math.random()*e.length)],a=_()+"&"+f(t[0],t[1]),r=["title","id","images","urls"].map((e=>`field[]=${e}`)).join("&");return`${c}/search?${a}&${r}&limit=20&sort=first_indexed%20desc`},u=(e,t,a,r,o)=>{const i=_(r)+(t?`&${f("topic_facet",t)}`:"")+(a?`&${f("genre_facet",a)}`:""),n=`facet[]=${e}`;return`${c}/search?lookfor=${o?encodeURIComponent(o):""}&${i}&${n}&limit=0`};u("genre_facet"),u("main_date_str");const m=["title","id","images","urls","recordPage","imageRights","rawData","buildings"],l=e=>{const t=m.map((e=>`field[]=${e}`)).join("&");return`${c}/record?id=${e}&${t}`},d=e=>{if(void 0===e.urls)return[];const c=[];return(e.urls||[]).forEach((e=>{(e.videoSources||[]).forEach((s=>{var f,_;"application/x-mpegURL"===s.type&&c.push((f=((e,t)=>{for(var a in t||(t={}))o.call(t,a)&&n(e,a,t[a]);if(r)for(var a of r(t))i.call(t,a)&&n(e,a,t[a]);return e})({},s),_={title:e.text},t(f,a(_))))}))})),c};export{d as e,p as f,s as l,l as r};
