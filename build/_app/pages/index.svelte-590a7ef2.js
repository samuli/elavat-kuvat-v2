import{S as t,i as e,s as a,e as r,t as s,c as n,a as l,g as o,d as i,b as c,f,D as m,h as $,E as u,j as h,k as p,m as d,n as g,o as v,x,u as w,v as b,r as E,w as y,Y as k,L as I,Z as D,_ as V,l as j,Q as C,$ as U,J as Y,G as S,a0 as _,X as A}from"../chunks/vendor-1a5a643c.js";import{n as L}from"../chunks/navigationState-44f1b18b.js";import{y as P,a as B,b as G,d as N,s as R}from"../chunks/util-eedb8744.js";import{R as F}from"../chunks/index-957ec836.js";import{S as H,F as J}from"../chunks/SearchHeading-fc49bab8.js";import{f as O}from"../chunks/api-01f7392a.js";function Q(t){let e,a,h,p;return{c(){e=r("a"),a=r("div"),h=s(t[0]),this.h()},l(r){e=n(r,"A",{href:!0});var s=l(e);a=n(s,"DIV",{class:!0});var c=l(a);h=o(c,t[0]),c.forEach(i),s.forEach(i),this.h()},h(){c(a,"class","text-md subpixel-antialiased text-gray-800 uppercase tracking-tight bg-gradient-to-b from-gray-100 to-gray-300 py-1 px-2 rounded-lg cursor-pointer ripple-bg-white"),c(e,"href",p=`/browse/date/${t[1]}-${t[2]}`)},m(t,r){f(t,e,r),m(e,a),m(a,h)},p(t,[a]){1&a&&$(h,t[0]),2&a&&p!==(p=`/browse/date/${t[1]}-${t[2]}`)&&c(e,"href",p)},i:u,o:u,d(t){t&&i(e)}}}function T(t,e,a){let{title:r}=e,{startYear:s}=e;const n=s<2e3?s+9:"*";return t.$$set=t=>{"title"in t&&a(0,r=t.title),"startYear"in t&&a(1,s=t.startYear)},[r,s,n]}class X extends t{constructor(t){super(),e(this,t,T,Q,a,{title:0,startYear:1})}}function Z(t,e,a){const r=t.slice();return r[1]=e[a],r}function q(t){let e,a,s,o;return a=new X({props:{startYear:t[1],title:P(t[1])}}),{c(){e=r("li"),h(a.$$.fragment),s=p(),this.h()},l(t){e=n(t,"LI",{class:!0});var r=l(e);d(a.$$.fragment,r),s=g(r),r.forEach(i),this.h()},h(){c(e,"class","mr-2 mb-2")},m(t,r){f(t,e,r),v(a,e,null),m(e,s),o=!0},p(t,e){const r={};1&e&&(r.startYear=t[1]),1&e&&(r.title=P(t[1])),a.$set(r)},i(t){o||(x(a.$$.fragment,t),o=!0)},o(t){w(a.$$.fragment,t),o=!1},d(t){t&&i(e),b(a)}}}function z(t){let e,a,s=t[0],o=[];for(let r=0;r<s.length;r+=1)o[r]=q(Z(t,s,r));const m=t=>w(o[t],1,1,(()=>{o[t]=null}));return{c(){e=r("ul");for(let t=0;t<o.length;t+=1)o[t].c();this.h()},l(t){e=n(t,"UL",{class:!0});var a=l(e);for(let e=0;e<o.length;e+=1)o[e].l(a);a.forEach(i),this.h()},h(){c(e,"class","flex flex-wrap mt-2")},m(t,r){f(t,e,r);for(let a=0;a<o.length;a+=1)o[a].m(e,null);a=!0},p(t,[a]){if(1&a){let r;for(s=t[0],r=0;r<s.length;r+=1){const n=Z(t,s,r);o[r]?(o[r].p(n,a),x(o[r],1)):(o[r]=q(n),o[r].c(),x(o[r],1),o[r].m(e,null))}for(E(),r=s.length;r<o.length;r+=1)m(r);y()}},i(t){if(!a){for(let t=0;t<s.length;t+=1)x(o[t]);a=!0}},o(t){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)w(o[e]);a=!1},d(t){t&&i(e),k(o,t)}}}function K(t,e,a){let{items:r=[]}=e;return t.$$set=t=>{"items"in t&&a(0,r=t.items)},[r]}class M extends t{constructor(t){super(),e(this,t,K,z,a,{items:0})}}const{document:W}=_;function tt(t){let e,a,$,u,E,y,k,S,_,A,L,P,R,O,Q,T,X,Z,q,z,K,tt,et,at,rt,st,nt,lt,ot,it,ct,ft,mt,$t,ut,ht,pt,dt,gt,vt,xt,wt,bt=`\n    <meta id="random-clips-url" data-url="${t[3]}"><\/script>\n    `;return W.title=e=B+" - "+G,S=new H({props:{title:"Yleisimmät aiheet"}}),L=new J({props:{facet:"topic_facet",facets:t[1],truncate:!0}}),Z=new H({props:{title:"Poimintoja"}}),K=new I({props:{class:"inline-block",icon:D}}),et=new F({props:{records:t[0]}}),ft=new H({props:{title:"Aikakausi"}}),$t=new M({props:{items:N}}),pt=new H({props:{title:"Genret"}}),gt=new J({props:{truncate:!1,facet:"genre_facet",facets:t[2]}}),{c(){a=new V,$=j(),u=p(),E=r("section"),y=r("div"),k=r("div"),h(S.$$.fragment),_=p(),A=r("div"),h(L.$$.fragment),P=p(),R=r("div"),O=r("div"),Q=r("div"),T=r("div"),X=r("div"),h(Z.$$.fragment),q=p(),z=r("div"),h(K.$$.fragment),tt=p(),h(et.$$.fragment),at=p(),rt=r("a"),st=r("div"),nt=r("div"),lt=r("div"),ot=s("Selaa elokuvia"),it=p(),ct=r("div"),h(ft.$$.fragment),mt=p(),h($t.$$.fragment),ut=p(),ht=r("div"),h(pt.$$.fragment),dt=p(),h(gt.$$.fragment),this.h()},l(t){const e=C('[data-svelte="svelte-1ikc3m1"]',W.head);a=U(e),$=j(),e.forEach(i),u=g(t),E=n(t,"SECTION",{});var r=l(E);y=n(r,"DIV",{class:!0});var s=l(y);k=n(s,"DIV",{class:!0});var c=l(k);d(S.$$.fragment,c),_=g(c),A=n(c,"DIV",{class:!0});var f=l(A);d(L.$$.fragment,f),f.forEach(i),P=g(c),R=n(c,"DIV",{class:!0});var m=l(R);O=n(m,"DIV",{class:!0});var h=l(O);Q=n(h,"DIV",{class:!0});var p=l(Q);T=n(p,"DIV",{class:!0});var v=l(T);X=n(v,"DIV",{class:!0});var x=l(X);d(Z.$$.fragment,x),q=g(x),z=n(x,"DIV",{class:!0,role:!0,title:!0});var w=l(z);d(K.$$.fragment,w),w.forEach(i),x.forEach(i),tt=g(v),d(et.$$.fragment,v),at=g(v),rt=n(v,"A",{href:!0});var b=l(rt);st=n(b,"DIV",{role:!0,class:!0});var I=l(st);nt=n(I,"DIV",{class:!0});var D=l(nt);lt=n(D,"DIV",{class:!0});var V=l(lt);ot=o(V,"Selaa elokuvia"),V.forEach(i),D.forEach(i),I.forEach(i),b.forEach(i),v.forEach(i),p.forEach(i),it=g(h),ct=n(h,"DIV",{});var Y=l(ct);d(ft.$$.fragment,Y),mt=g(Y),d($t.$$.fragment,Y),Y.forEach(i),ut=g(h),ht=n(h,"DIV",{class:!0});var B=l(ht);d(pt.$$.fragment,B),dt=g(B),d(gt.$$.fragment,B),B.forEach(i),h.forEach(i),m.forEach(i),c.forEach(i),s.forEach(i),r.forEach(i),this.h()},h(){a.a=$,c(A,"class","h-16 min-h-32 w-full mb-3"),c(z,"class","cursor-pointer active:text-pink-500"),c(z,"role","button"),c(z,"title","Näytä lisää poimintoja"),c(X,"class","flex items-center mb-1"),c(lt,"class","inline-flex"),c(nt,"class","flex justify-center items-center"),c(st,"role","button"),c(st,"class","inline-flex mt-6 mb-4 py-3 px-4 text-md subpixel-antialiased font-medium tracking-tight rounded-xl bg-gray-200 text-gray-900 hover:text-black hover:bg-white cursor-pointer bg-gradient-to-b from-gray-100 to-gray-300 ripple-bg-white"),c(rt,"href","/browse/clips/all"),c(T,"class","flex flex-col text-center"),c(Q,"class","mt-6"),c(ht,"class","mt-2"),c(O,"class","flex flex-col flex-wrap md:flex-nowrap"),c(R,"class","w-full"),c(k,"class","flex flex-col flex-wrap md:flex-nowrap"),c(y,"class","w-full")},m(e,r){a.m(bt,W.head),m(W.head,$),f(e,u,r),f(e,E,r),m(E,y),m(y,k),v(S,k,null),m(k,_),m(k,A),v(L,A,null),m(k,P),m(k,R),m(R,O),m(O,Q),m(Q,T),m(T,X),v(Z,X,null),m(X,q),m(X,z),v(K,z,null),m(T,tt),v(et,T,null),m(T,at),m(T,rt),m(rt,st),m(st,nt),m(nt,lt),m(lt,ot),m(O,it),m(O,ct),v(ft,ct,null),m(ct,mt),v($t,ct,null),m(O,ut),m(O,ht),v(pt,ht,null),m(ht,dt),v(gt,ht,null),vt=!0,xt||(wt=Y(z,"click",t[4]),xt=!0)},p(t,[r]){(!vt||0&r)&&e!==(e=B+" - "+G)&&(W.title=e),(!vt||8&r)&&bt!==(bt=`\n    <meta id="random-clips-url" data-url="${t[3]}"><\/script>\n    `)&&a.p(bt);const s={};2&r&&(s.facets=t[1]),L.$set(s);const n={};1&r&&(n.records=t[0]),et.$set(n);const l={};4&r&&(l.facets=t[2]),gt.$set(l)},i(t){vt||(x(S.$$.fragment,t),x(L.$$.fragment,t),x(Z.$$.fragment,t),x(K.$$.fragment,t),x(et.$$.fragment,t),x(ft.$$.fragment,t),x($t.$$.fragment,t),x(pt.$$.fragment,t),x(gt.$$.fragment,t),vt=!0)},o(t){w(S.$$.fragment,t),w(L.$$.fragment,t),w(Z.$$.fragment,t),w(K.$$.fragment,t),w(et.$$.fragment,t),w(ft.$$.fragment,t),w($t.$$.fragment,t),w(pt.$$.fragment,t),w(gt.$$.fragment,t),vt=!1},d(t){i($),t&&a.d(),t&&i(u),t&&i(E),b(S),b(L),b(Z),b(K),b(et),b(ft),b($t),b(pt),b(gt),xt=!1,wt()}}}var et=function(t,e,a,r){return new(a||(a=Promise))((function(s,n){function l(t){try{i(r.next(t))}catch(e){n(e)}}function o(t){try{i(r.throw(t))}catch(e){n(e)}}function i(t){var e;t.done?s(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(l,o)}i((r=r.apply(t,e||[])).next())}))};const at=({fetch:t,context:e})=>et(void 0,void 0,void 0,(function*(){let a=O();{const t=document.getElementById("random-clips-url");t&&(a=t.getAttribute("data-url"))}let r=[];const s=yield t(`/api/frontpage.json?recordUrl=${encodeURIComponent(a)}`);if(s.ok){r=(yield s.json()).records}return{props:{genres:e.genres,randomClips:r,randomClipsUrl:a,topics:e.topics}}}));function rt(t,e,a){let r;S(t,L,(t=>a(5,r=t)));var s=this&&this.__awaiter||function(t,e,a,r){return new(a||(a=Promise))((function(s,n){function l(t){try{i(r.next(t))}catch(e){n(e)}}function o(t){try{i(r.throw(t))}catch(e){n(e)}}function i(t){var e;t.done?s(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(l,o)}i((r=r.apply(t,e||[])).next())}))};let{topics:n=[]}=e,{genres:l=[]}=e,{randomClips:o=[]}=e,{randomClipsUrl:i=""}=e;return t.$$set=t=>{"topics"in t&&a(1,n=t.topics),"genres"in t&&a(2,l=t.genres),"randomClips"in t&&a(0,o=t.randomClips),"randomClipsUrl"in t&&a(3,i=t.randomClipsUrl)},[o,n,l,i,()=>s(void 0,void 0,void 0,(function*(){A(L,r="loading",r);const{records:t}=yield R(fetch,O());A(L,r="loaded",r),a(0,o=t)}))]}class st extends t{constructor(t){super(),e(this,t,rt,tt,a,{topics:1,genres:2,randomClips:0,randomClipsUrl:3})}}export{st as default,at as load};
