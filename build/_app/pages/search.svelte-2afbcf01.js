import{S as t,i as o,s as e,k as s,l as r,Q as n,d as a,n as c,f as i,u,w as l,x as p,H as f,r as d,j as m,m as g,o as h,v as k,e as v,t as b,c as j,a as y,g as P,D as $,E as C}from"../chunks/vendor-1a5a643c.js";import{R as w}from"../chunks/index-d118e750.js";import{c as x,a as O}from"../chunks/util-eedb8744.js";import{n as E}from"../chunks/navigationState-44f1b18b.js";import"../chunks/navigation-51f4a605.js";import"../chunks/singletons-12a22614.js";import"../chunks/SearchHeading-fc49bab8.js";import"../chunks/index-957ec836.js";import"../chunks/api-01f7392a.js";function S(t){let o,e;return o=new w({props:{lookfor:t[4],resultPage:t[3],resultCount:t[1],records:t[0],topics:t[2],heading:"Haku: "}}),{c(){m(o.$$.fragment)},l(t){g(o.$$.fragment,t)},m(t,s){h(o,t,s),e=!0},p(t,e){const s={};16&e&&(s.lookfor=t[4]),8&e&&(s.resultPage=t[3]),2&e&&(s.resultCount=t[1]),1&e&&(s.records=t[0]),4&e&&(s.topics=t[2]),o.$set(s)},i(t){e||(p(o.$$.fragment,t),e=!0)},o(t){u(o.$$.fragment,t),e=!1},d(t){k(o,t)}}}function _(t){let o,e;return{c(){o=v("p"),e=b("Ei tuloksia...")},l(t){o=j(t,"P",{});var s=y(o);e=P(s,"Ei tuloksia..."),s.forEach(a)},m(t,s){i(t,o,s),$(o,e)},p:C,i:C,o:C,d(t){t&&a(o)}}}function H(t){let o,e,f,m,g,h;document.title=o=t[4]+" | "+O;const k=[_,S],v=[];function b(t,o){return t[5]||0!==t[0].length?1:0}return f=b(t),m=v[f]=k[f](t),{c(){e=s(),m.c(),g=r()},l(t){n('[data-svelte="svelte-b29k8i"]',document.head).forEach(a),e=c(t),m.l(t),g=r()},m(t,o){i(t,e,o),v[f].m(t,o),i(t,g,o),h=!0},p(t,[e]){(!h||16&e)&&o!==(o=t[4]+" | "+O)&&(document.title=o);let s=f;f=b(t),f===s?v[f].p(t,e):(d(),u(v[s],1,1,(()=>{v[s]=null})),l(),m=v[f],m?m.p(t,e):(m=v[f]=k[f](t),m.c()),p(m,1),m.m(g.parentNode,g))},i(t){h||(p(m),h=!0)},o(t){u(m),h=!1},d(t){t&&a(e),v[f].d(t),t&&a(g)}}}var q=function(t,o,e,s){return new(e||(e=Promise))((function(r,n){function a(t){try{i(s.next(t))}catch(o){n(o)}}function c(t){try{i(s.throw(t))}catch(o){n(o)}}function i(t){var o;t.done?r(t.value):(o=t.value,o instanceof e?o:new e((function(t){t(o)}))).then(a,c)}i((s=s.apply(t,o||[])).next())}))};const N=({fetch:t,page:o})=>q(void 0,void 0,void 0,(function*(){const e=o.query.get("lookfor"),s=Number(o.query.get("page")||1),r=yield t(`/api/search/results.json?lookfor=${e}&page=${s}`,x);if(r.ok){const t=yield r.json(),{records:o,topics:n}=t;return function(t,o){var e={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&o.indexOf(s)<0&&(e[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)o.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(e[s[r]]=t[s[r]])}}(t,["records","topics"]),{props:{lookfor:e,topics:n,records:o.records,resultCount:o.resultCount,resultPage:s}}}return{props:{lookfor:e,topics:topics,records:records,resultCount:resultCount,resultPage:s}}}));function D(t,o,e){this&&this.__awaiter,this&&this.__rest;let{records:s=[]}=o,{resultCount:r=0}=o,{topics:n=[]}=o,{resultPage:a}=o,{lookfor:c=""}=o,i=!1;const u=E.subscribe((t=>{e(5,i="loading"===t)}));return f((()=>{u()})),t.$$set=t=>{"records"in t&&e(0,s=t.records),"resultCount"in t&&e(1,r=t.resultCount),"topics"in t&&e(2,n=t.topics),"resultPage"in t&&e(3,a=t.resultPage),"lookfor"in t&&e(4,c=t.lookfor)},[s,r,n,a,c,i]}class I extends t{constructor(t){super(),o(this,t,D,H,e,{records:0,resultCount:1,topics:2,resultPage:3,lookfor:4})}}export{I as default,N as load};
