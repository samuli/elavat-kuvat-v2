import{S as t,i as e,s as r,e as s,t as a,c as l,a as n,g as c,d as o,b as i,f,D as h,E as d,L as u,ad as m,k as p,j as g,n as v,m as $,o as x,x as E,u as y,v as D,Y as w,a7 as I,J as V,a1 as b,a2 as k,O as j,w as A,ae as _,h as S,l as P,Q as U,A as L,af as R,r as M,a3 as N,W as H,ag as K}from"../chunks/vendor-de530dcf.js";import{f as T,g as Y}from"../chunks/record-bff8f3f9.js";import{S as C,F}from"../chunks/SearchHeading-22de2d8e.js";import{s as G,l as O,a as q}from"../chunks/util-d79d52b9.js";import{r as z,e as B}from"../chunks/api-d72cf0fe.js";function J(t){let e,r,w,I,V,b,k,j,A,_,S,P=t[1]&&t[2]&&function(t){let e,r,u;return{c(){e=s("div"),r=s("a"),u=a(t[1]),this.h()},l(s){e=l(s,"DIV",{class:!0});var a=n(e);r=l(a,"A",{href:!0,target:!0,rel:!0});var i=n(r);u=c(i,t[1]),i.forEach(o),a.forEach(o),this.h()},h(){i(r,"href",t[2]),i(r,"target","_blank"),i(r,"rel","noopener noreferrer"),i(e,"class","underline")},m(t,s){f(t,e,s),h(e,r),h(r,u)},p:d,d(t){t&&o(e)}}}(t);return _=new u({props:{icon:m}}),{c(){e=s("div"),r=s("span"),w=a("Aineiston käyttöoikeudet:"),I=p(),V=s("a"),b=s("div"),P&&P.c(),k=p(),j=s("div"),A=s("span"),g(_.$$.fragment),this.h()},l(t){e=l(t,"DIV",{class:!0});var s=n(e);r=l(s,"SPAN",{class:!0});var a=n(r);w=c(a,"Aineiston käyttöoikeudet:"),a.forEach(o),I=v(s),V=l(s,"A",{target:!0,rel:!0,href:!0,class:!0,title:!0});var i=n(V);b=l(i,"DIV",{class:!0});var f=n(b);P&&P.l(f),k=v(f),j=l(f,"DIV",{class:!0});var h=n(j);A=l(h,"SPAN",{class:!0});var d=n(A);$(_.$$.fragment,d),d.forEach(o),h.forEach(o),f.forEach(o),i.forEach(o),s.forEach(o),this.h()},h(){i(r,"class","uppercase text-xs font-bold"),i(A,"class","text-xs ml-2 "),i(j,"class","text-gray-600 ml-1 flex jusitfy-center items-center text-xl"),i(b,"class","text-sm flex flex-row items-center"),i(V,"target","_blank"),i(V,"rel","noopener noreferrer"),i(V,"href",t[0]),i(V,"class","hover:text-gray-800"),i(V,"title","Katso lisätiedot Finnassa"),i(e,"class","flex flex-col")},m(t,s){f(t,e,s),h(e,r),h(r,w),h(e,I),h(e,V),h(V,b),P&&P.m(b,null),h(b,k),h(b,j),h(j,A),x(_,A,null),S=!0},p(t,[e]){t[1]&&t[2]&&P.p(t,e)},i(t){S||(E(_.$$.fragment,t),S=!0)},o(t){y(_.$$.fragment,t),S=!1},d(t){t&&o(e),P&&P.d(),D(_)}}}function Q(t,e,r){var s,a;let{record:l}=e;const n=T(l.recordPage),c=null===(s=l.imageRights)||void 0===s?void 0:s.copyright,o=(null===(a=l.imageRights)||void 0===a?void 0:a.link)||n;return t.$$set=t=>{"record"in t&&r(3,l=t.record)},[n,c,o,l]}class W extends t{constructor(t){super(),e(this,t,Q,J,r,{record:3})}}function X(t,e,r){const s=t.slice();return s[3]=e[r],s}function Z(t){let e,r,d,u,m=t[0][0]+"",g=t[0].length>1&&function(t){let e,r=t[0].slice(1),a=[];for(let s=0;s<r.length;s+=1)a[s]=tt(X(t,r,s));return{c(){e=s("div");for(let t=0;t<a.length;t+=1)a[t].c()},l(t){e=l(t,"DIV",{});var r=n(e);for(let e=0;e<a.length;e+=1)a[e].l(r);r.forEach(o)},m(t,r){f(t,e,r);for(let s=0;s<a.length;s+=1)a[s].m(e,null)},p(t,s){if(1&s){let l;for(r=t[0].slice(1),l=0;l<r.length;l+=1){const n=X(t,r,l);a[l]?a[l].p(n,s):(a[l]=tt(n),a[l].c(),a[l].m(e,null))}for(;l<a.length;l+=1)a[l].d(1);a.length=r.length}},d(t){t&&o(e),w(a,t)}}}(t);return{c(){e=s("details"),r=s("summary"),d=a(m),u=p(),g&&g.c(),this.h()},l(t){e=l(t,"DETAILS",{});var s=n(e);r=l(s,"SUMMARY",{class:!0});var a=n(r);d=c(a,m),a.forEach(o),u=v(s),g&&g.l(s),s.forEach(o),this.h()},h(){i(r,"class","cursor-pointer whitespace-pre-line outline-none")},m(t,s){f(t,e,s),h(e,r),h(r,d),h(e,u),g&&g.m(e,null)},p(t,e){t[0].length>1&&g.p(t,e)},d(t){t&&o(e),g&&g.d()}}}function tt(t){let e,r,u,m=t[3]+"";return{c(){e=s("p"),r=a(m),u=p(),this.h()},l(t){e=l(t,"P",{class:!0});var s=n(e);r=c(s,m),u=v(s),s.forEach(o),this.h()},h(){i(e,"class","pt-2")},m(t,s){f(t,e,s),h(e,r),h(e,u)},p:d,d(t){t&&o(e)}}}function et(t){let e,r,u=t[1]&&Z(t),m=!t[1]&&function(t){let e,r,i=t[0][0]+"";return{c(){e=s("p"),r=a(i)},l(t){e=l(t,"P",{});var s=n(e);r=c(s,i),s.forEach(o)},m(t,s){f(t,e,s),h(e,r)},p:d,d(t){t&&o(e)}}}(t);return{c(){e=s("div"),u&&u.c(),r=p(),m&&m.c(),this.h()},l(t){e=l(t,"DIV",{class:!0});var s=n(e);u&&u.l(s),r=v(s),m&&m.l(s),s.forEach(o),this.h()},h(){i(e,"class","mt-4 leading-snug text-md")},m(t,s){f(t,e,s),u&&u.m(e,null),h(e,r),m&&m.m(e,null)},p(t,[e]){t[1]&&u.p(t,e),t[1]||m.p(t,e)},i:d,o:d,d(t){t&&o(e),u&&u.d(),m&&m.d()}}}function rt(t,e,r){let{text:s}=e;const a=s.replace(/<br( )?\/>/g,"\n").split("\n"),l=a.length>1;return t.$$set=t=>{"text"in t&&r(2,s=t.text)},[a,l,s]}class st extends t{constructor(t){super(),e(this,t,rt,et,r,{text:2})}}function at(t,e,r){const s=t.slice();return s[12]=e[r],s}function lt(t){var e;let r,d,m,w,b,k,j,_,P,U,L,N,H,K,T,C,F,G,O,q,z,B,J,Q,X,Z,tt,et,rt,st,at,lt,it,mt,pt,gt,vt,$t,xt,Et,yt,Dt=t[0].title+"",wt=Y(t[0],"author_corporate")+"",It=` ${Y(t[0],"main_date_str")}`,Vt=t[3]&&nt(t);T=new u({props:{class:"ml-2",icon:R}});let bt=t[5]&&ct(t),kt=t[0].urls&&t[0].urls.length>1&&ot(t),jt=(null==(e=t[0].rawData)?void 0:e.description)&&ft(t),At=t[0].buildings&&ht(t);pt=new W({props:{record:t[0]}});let _t=t[2].length>0&&dt(t),St=t[1].length>0&&ut(t);return{c(){r=s("div"),d=s("div"),m=s("article"),w=s("div"),b=s("div"),k=s("div"),j=s("div"),_=s("div"),P=s("div"),Vt&&Vt.c(),U=p(),L=s("div"),N=s("div"),H=s("span"),K=a("Katso "),g(T.$$.fragment),C=p(),F=s("div"),bt&&bt.c(),G=p(),O=s("div"),q=s("div"),z=s("h1"),B=a(Dt),J=p(),Q=s("p"),X=a(wt),Z=p(),tt=a(It),et=p(),kt&&kt.c(),rt=p(),st=s("div"),jt&&jt.c(),at=p(),lt=s("div"),At&&At.c(),it=p(),mt=s("div"),g(pt.$$.fragment),gt=p(),vt=s("div"),_t&&_t.c(),$t=p(),St&&St.c(),this.h()},l(t){r=l(t,"DIV",{class:!0});var e=n(r);d=l(e,"DIV",{class:!0});var s=n(d);m=l(s,"ARTICLE",{});var a=n(m);w=l(a,"DIV",{class:!0});var i=n(w);b=l(i,"DIV",{class:!0});var f=n(b);k=l(f,"DIV",{class:!0});var h=n(k);j=l(h,"DIV",{class:!0});var u=n(j);_=l(u,"DIV",{class:!0});var p=n(_);P=l(p,"DIV",{class:!0});var g=n(P);Vt&&Vt.l(g),g.forEach(o),p.forEach(o),U=v(u),L=l(u,"DIV",{class:!0});var x=n(L);N=l(x,"DIV",{class:!0});var E=n(N);H=l(E,"SPAN",{class:!0});var y=n(H);K=c(y,"Katso "),$(T.$$.fragment,y),y.forEach(o),E.forEach(o),x.forEach(o),u.forEach(o),h.forEach(o),C=v(f),F=l(f,"DIV",{});var D=n(F);bt&&bt.l(D),D.forEach(o),f.forEach(o),G=v(i),O=l(i,"DIV",{class:!0});var I=n(O);q=l(I,"DIV",{});var V=n(q);z=l(V,"H1",{class:!0});var A=n(z);B=c(A,Dt),A.forEach(o),J=v(V),Q=l(V,"P",{class:!0});var S=n(Q);X=c(S,wt),Z=v(S),tt=c(S,It),S.forEach(o),V.forEach(o),et=v(I),kt&&kt.l(I),I.forEach(o),i.forEach(o),rt=v(a),st=l(a,"DIV",{class:!0});var R=n(st);jt&&jt.l(R),at=v(R),lt=l(R,"DIV",{class:!0});var M=n(lt);At&&At.l(M),it=v(M),mt=l(M,"DIV",{class:!0});var Y=n(mt);$(pt.$$.fragment,Y),Y.forEach(o),M.forEach(o),gt=v(R),vt=l(R,"DIV",{});var W=n(vt);_t&&_t.l(W),$t=v(W),St&&St.l(W),W.forEach(o),R.forEach(o),a.forEach(o),s.forEach(o),e.forEach(o),this.h()},h(){i(P,"class","aspect-w-4 aspect-h-3 items-center justify-center"),i(_,"class","w-full h-full"),i(H,"class","ml-2 flex items-center uppercase text-sm"),i(N,"class","flex items-center justify-center font-semibold text-lg px-4 py-3 rounded-xl bg-gradient-to-b from-pink-500 to-red-500 text-gray-100 border-2 border-red-500"),i(L,"class","absolute align-middle p-10 self-center align-center justify-center flex cursor-pointer"),i(j,"class","flex relative items-center justify-center bg-gradient-to-b from-gray-900 to-gray-800 rounded-xl group cursor-pointer min-h-64"),i(k,"class","absolute z-10"),I(k,"hidden",!t[6]),I(F,"hidden",t[6]),i(b,"class","aspect-w-4 aspect-h-3 overflow-hidden"),i(z,"class","text-xl md:text-3xl font-bold"),i(Q,"class","text-md text-gray-100"),i(O,"class","flex flex-col justify-center mt-2"),i(w,"class","flex flex-col w-full max-w-2xl"),i(mt,"class","sm:mt-0 mt-2"),i(lt,"class","my-5 inline-flex flex-col sm:flex-row bg-yellow-50 text-gray-900 p-3 rounded-md"),i(st,"class","max-w-2xl"),i(d,"class","mt-3"),i(r,"class","w-auto font-sans")},m(e,s){f(e,r,s),h(r,d),h(d,m),h(m,w),h(w,b),h(b,k),h(k,j),h(j,_),h(_,P),Vt&&Vt.m(P,null),h(j,U),h(j,L),h(L,N),h(N,H),h(H,K),x(T,H,null),h(b,C),h(b,F),bt&&bt.m(F,null),h(w,G),h(w,O),h(O,q),h(q,z),h(z,B),h(q,J),h(q,Q),h(Q,X),h(Q,Z),h(Q,tt),h(O,et),kt&&kt.m(O,null),h(m,rt),h(m,st),jt&&jt.m(st,null),h(st,at),h(st,lt),At&&At.m(lt,null),h(lt,it),h(lt,mt),x(pt,mt,null),h(st,gt),h(st,vt),_t&&_t.m(vt,null),h(vt,$t),St&&St.m(vt,null),xt=!0,Et||(yt=V(j,"click",t[9]),Et=!0)},p(t,e){var r;t[3]?Vt?(Vt.p(t,e),8&e&&E(Vt,1)):(Vt=nt(t),Vt.c(),E(Vt,1),Vt.m(P,null)):Vt&&(M(),y(Vt,1,1,(()=>{Vt=null})),A()),64&e&&I(k,"hidden",!t[6]),t[5]?bt?bt.p(t,e):(bt=ct(t),bt.c(),bt.m(F,null)):bt&&(bt.d(1),bt=null),64&e&&I(F,"hidden",t[6]),(!xt||1&e)&&Dt!==(Dt=t[0].title+"")&&S(B,Dt),(!xt||1&e)&&wt!==(wt=Y(t[0],"author_corporate")+"")&&S(X,wt),(!xt||1&e)&&It!==(It=` ${Y(t[0],"main_date_str")}`)&&S(tt,It),t[0].urls&&t[0].urls.length>1?kt?(kt.p(t,e),1&e&&E(kt,1)):(kt=ot(t),kt.c(),E(kt,1),kt.m(O,null)):kt&&(M(),y(kt,1,1,(()=>{kt=null})),A()),(null==(r=t[0].rawData)?void 0:r.description)?jt?(jt.p(t,e),1&e&&E(jt,1)):(jt=ft(t),jt.c(),E(jt,1),jt.m(st,at)):jt&&(M(),y(jt,1,1,(()=>{jt=null})),A()),t[0].buildings?At?(At.p(t,e),1&e&&E(At,1)):(At=ht(t),At.c(),E(At,1),At.m(lt,it)):At&&(M(),y(At,1,1,(()=>{At=null})),A());const s={};1&e&&(s.record=t[0]),pt.$set(s),t[2].length>0?_t?(_t.p(t,e),4&e&&E(_t,1)):(_t=dt(t),_t.c(),E(_t,1),_t.m(vt,$t)):_t&&(M(),y(_t,1,1,(()=>{_t=null})),A()),t[1].length>0?St?(St.p(t,e),2&e&&E(St,1)):(St=ut(t),St.c(),E(St,1),St.m(vt,null)):St&&(M(),y(St,1,1,(()=>{St=null})),A())},i(t){xt||(E(Vt),E(T.$$.fragment,t),E(kt),E(jt),E(At),E(pt.$$.fragment,t),E(_t),E(St),xt=!0)},o(t){y(Vt),y(T.$$.fragment,t),y(kt),y(jt),y(At),y(pt.$$.fragment,t),y(_t),y(St),xt=!1},d(t){t&&o(r),Vt&&Vt.d(),D(T),bt&&bt.d(),kt&&kt.d(),jt&&jt.d(),At&&At.d(),D(pt),_t&&_t.d(),St&&St.d(),Et=!1,yt()}}}function nt(t){let e,r,a,n,c;return{c(){e=s("img"),this.h()},l(t){e=l(t,"IMG",{alt:!0,src:!0,class:!0}),this.h()},h(){i(e,"alt","Esikatselukuva"),b(e.src,r=t[3])||i(e,"src",r),i(e,"class","w-auto rouded-xl overflow-hidden object-cover object-center")},m(t,r){f(t,e,r),c=!0},p(t,s){(!c||8&s&&!b(e.src,r=t[3]))&&i(e,"src",r)},i(t){c||(k((()=>{n&&n.end(1),a=N(e,H,{duration:300}),a.start()})),c=!0)},o(t){a&&a.invalidate(),n=j(e,H,{duration:10}),c=!1},d(t){t&&o(e),t&&n&&n.end()}}}function ct(t){let e,r,a;return{c(){e=s("vm-player"),r=s("vm-hls"),a=s("source"),this.h()},l(t){e=l(t,"VM-PLAYER",{"aspect-ratio":!0,viewtype:!0,poster:!0,autoplay:!0,controls:!0});var s=n(e);r=l(s,"VM-HLS",{crossorigin:!0});var c=n(r);a=l(c,"SOURCE",{"data-src":!0,type:!0}),c.forEach(o),s.forEach(o),this.h()},h(){i(a,"data-src",t[5]),i(a,"type","application/x-mpegURL"),_(r,"crossorigin",""),_(e,"aspect-ratio","4:3"),_(e,"viewtype","video"),_(e,"poster",t[3]),_(e,"autoplay",!0),_(e,"controls","")},m(s,l){f(s,e,l),h(e,r),h(r,a),t[10](e)},p(t,r){32&r&&i(a,"data-src",t[5]),8&r&&_(e,"poster",t[3])},d(r){r&&o(e),t[10](null)}}}function ot(t){let e,r,a=B(t[0]),c=[];for(let s=0;s<a.length;s+=1)c[s]=it(at(t,a,s));const h=t=>y(c[t],1,1,(()=>{c[t]=null}));return{c(){e=s("ul");for(let t=0;t<c.length;t+=1)c[t].c();this.h()},l(t){e=l(t,"UL",{class:!0});var r=n(e);for(let e=0;e<c.length;e+=1)c[e].l(r);r.forEach(o),this.h()},h(){i(e,"class","mt-5")},m(t,s){f(t,e,s);for(let r=0;r<c.length;r+=1)c[r].m(e,null);r=!0},p(t,r){if(97&r){let s;for(a=B(t[0]),s=0;s<a.length;s+=1){const l=at(t,a,s);c[s]?(c[s].p(l,r),E(c[s],1)):(c[s]=it(l),c[s].c(),E(c[s],1),c[s].m(e,null))}for(M(),s=a.length;s<c.length;s+=1)h(s);A()}},i(t){if(!r){for(let t=0;t<a.length;t+=1)E(c[t]);r=!0}},o(t){c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)y(c[e]);r=!1},d(t){t&&o(e),w(c,t)}}}function it(t){let e,r,d,m,w,I,b,k,j,A,_,P=t[12].title+"";function U(){return t[11](t[12])}return m=new u({props:{icon:R}}),{c(){e=s("li"),r=s("div"),d=s("div"),g(m.$$.fragment),w=p(),I=s("div"),b=a(P),k=p(),this.h()},l(t){e=l(t,"LI",{class:!0});var s=n(e);r=l(s,"DIV",{class:!0});var a=n(r);d=l(a,"DIV",{class:!0});var i=n(d);$(m.$$.fragment,i),i.forEach(o),a.forEach(o),w=v(s),I=l(s,"DIV",{class:!0});var f=n(I);b=c(f,P),f.forEach(o),k=v(s),s.forEach(o),this.h()},h(){i(d,"class","ml-1"),i(r,"class","text-gray-100 group-hover:text-white fill-current stroke-current items-center justify-center flex text-sm"),i(I,"class","ml-3"),i(e,"class","flex my-2 items-center group text-md text-gray-200 hover:text-white cursor-pointer")},m(t,s){f(t,e,s),h(e,r),h(r,d),x(m,d,null),h(e,w),h(e,I),h(I,b),h(e,k),j=!0,A||(_=V(e,"click",U),A=!0)},p(e,r){t=e,(!j||1&r)&&P!==(P=t[12].title+"")&&S(b,P)},i(t){j||(E(m.$$.fragment,t),j=!0)},o(t){y(m.$$.fragment,t),j=!1},d(t){t&&o(e),D(m),A=!1,_()}}}function ft(t){var e;let r,s;return r=new st({props:{text:null==(e=t[0].rawData)?void 0:e.description}}),{c(){g(r.$$.fragment)},l(t){$(r.$$.fragment,t)},m(t,e){x(r,t,e),s=!0},p(t,e){var s;const a={};1&e&&(a.text=null==(s=t[0].rawData)?void 0:s.description),r.$set(a)},i(t){s||(E(r.$$.fragment,t),s=!0)},o(t){y(r.$$.fragment,t),s=!1},d(t){D(r,t)}}}function ht(t){let e,r,d,w,I,V,b,k,j,A,_,P=t[0].buildings[0].translated+"";return A=new u({props:{icon:m}}),{c(){e=s("div"),r=s("div"),d=a("Aineiston tarjoaa:"),w=p(),I=s("div"),V=s("a"),b=a(P),k=p(),j=s("span"),g(A.$$.fragment),this.h()},l(t){e=l(t,"DIV",{class:!0});var s=n(e);r=l(s,"DIV",{class:!0});var a=n(r);d=c(a,"Aineiston tarjoaa:"),a.forEach(o),w=v(s),I=l(s,"DIV",{class:!0});var i=n(I);V=l(i,"A",{href:!0,target:!0,rel:!0,class:!0});var f=n(V);b=c(f,P),k=v(f),j=l(f,"SPAN",{class:!0});var h=n(j);$(A.$$.fragment,h),h.forEach(o),f.forEach(o),i.forEach(o),s.forEach(o),this.h()},h(){i(r,"class","mr-2 uppercase text-xs font-bold"),i(j,"class","ml-2 mr-5 text-gray-700 text-xs"),i(V,"href","https://kavi.finna.fi"),i(V,"target","_blank"),i(V,"rel","noopener noreferrer"),i(V,"class","flex items-center justify-center underline hover:text-gray-700"),i(I,"class","flex text-sm"),i(e,"class","flex flex-col")},m(t,s){f(t,e,s),h(e,r),h(r,d),h(e,w),h(e,I),h(I,V),h(V,b),h(V,k),h(V,j),x(A,j,null),_=!0},p(t,e){(!_||1&e)&&P!==(P=t[0].buildings[0].translated+"")&&S(b,P)},i(t){_||(E(A.$$.fragment,t),_=!0)},o(t){y(A.$$.fragment,t),_=!1},d(t){t&&o(e),D(A)}}}function dt(t){let e,r,a,c,d;return r=new C({props:{title:"Aiheet"}}),c=new F({props:{truncate:!1,facet:"topic_facet",facets:t[2]}}),{c(){e=s("div"),g(r.$$.fragment),a=p(),g(c.$$.fragment),this.h()},l(t){e=l(t,"DIV",{class:!0});var s=n(e);$(r.$$.fragment,s),a=v(s),$(c.$$.fragment,s),s.forEach(o),this.h()},h(){i(e,"class","mb-2")},m(t,s){f(t,e,s),x(r,e,null),h(e,a),x(c,e,null),d=!0},p(t,e){const r={};4&e&&(r.facets=t[2]),c.$set(r)},i(t){d||(E(r.$$.fragment,t),E(c.$$.fragment,t),d=!0)},o(t){y(r.$$.fragment,t),y(c.$$.fragment,t),d=!1},d(t){t&&o(e),D(r),D(c)}}}function ut(t){let e,r,a,c,i;return r=new C({props:{title:"Genret"}}),c=new F({props:{truncate:!1,facet:"genre_facet",facets:t[1]}}),{c(){e=s("div"),g(r.$$.fragment),a=p(),g(c.$$.fragment)},l(t){e=l(t,"DIV",{});var s=n(e);$(r.$$.fragment,s),a=v(s),$(c.$$.fragment,s),s.forEach(o)},m(t,s){f(t,e,s),x(r,e,null),h(e,a),x(c,e,null),i=!0},p(t,e){const r={};2&e&&(r.facets=t[1]),c.$set(r)},i(t){i||(E(r.$$.fragment,t),E(c.$$.fragment,t),i=!0)},o(t){y(r.$$.fragment,t),y(c.$$.fragment,t),i=!1},d(t){t&&o(e),D(r),D(c)}}}function mt(t){let e,r,s,a;document.title=e=t[0].title+" | "+q;let l=!0===t[4]&&t[0]&&lt(t);return{c(){r=p(),l&&l.c(),s=P()},l(t){U('[data-svelte="svelte-1wyjdg9"]',document.head).forEach(o),r=v(t),l&&l.l(t),s=P()},m(t,e){f(t,r,e),l&&l.m(t,e),f(t,s,e),a=!0},p(t,[r]){(!a||1&r)&&e!==(e=t[0].title+" | "+q)&&(document.title=e),!0===t[4]&&t[0]?l?(l.p(t,r),17&r&&E(l,1)):(l=lt(t),l.c(),E(l,1),l.m(s.parentNode,s)):l&&(M(),y(l,1,1,(()=>{l=null})),A())},i(t){a||(E(l),a=!0)},o(t){y(l),a=!1},d(t){t&&o(r),l&&l.d(t),t&&o(s)}}}const pt=async({page:t,fetch:e})=>{var r;const s=z(t.query.get("id")),a=G(e,s),[{records:l}]=await O([a]),n=B(l[0]),c=l[0];return{props:{record:c,videoUrls:n,topics:Y(c,"topic_facet")||[],genres:Y(c,"genre_facet")||[],description:(null===(r=c.rawData)||void 0===r?void 0:r.description)||null,poster:c.images.length?`https://api.finna.fi${c.images[0]}`:null}}};function gt(t,e,r){let s,{record:a=null}=e,{videoUrls:l=null}=e,{genres:n=[]}=e,{topics:c=[]}=e,{poster:o}=e,i=!1,f=null,h=!0;L((async()=>{r(4,i=!0),r(5,f=l.length>0&&l[0].src||null)}));return t.$$set=t=>{"record"in t&&r(0,a=t.record),"videoUrls"in t&&r(8,l=t.videoUrls),"genres"in t&&r(1,n=t.genres),"topics"in t&&r(2,c=t.topics),"poster"in t&&r(3,o=t.poster)},[a,n,c,o,i,f,h,s,l,()=>{r(6,h=!1),setTimeout((()=>s.play()),200)},function(t){K[t?"unshift":"push"]((()=>{s=t,r(7,s)}))},t=>{r(5,f=t.src),r(6,h=!1)}]}class vt extends t{constructor(t){super(),e(this,t,gt,mt,r,{record:0,videoUrls:8,genres:1,topics:2,poster:3})}}export{vt as default,pt as load};
